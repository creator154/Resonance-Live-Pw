<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dev-Boi Style PW Live Player</title>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <style>
    body { margin:0; background:#000; font-family:Arial, sans-serif; color:#fff; overflow:hidden; }
    #player-container { position:relative; width:100vw; height:100vh; background:#111; }
    #video { width:100%; height:100%; object-fit:contain; }
    .controls {
      position:absolute; bottom:0; left:0; right:0;
      background:linear-gradient(to top, rgba(0,0,0,0.85), transparent);
      padding:15px 20px; display:flex; align-items:center; z-index:10;
    }
    button { background:none; border:none; color:#fff; font-size:26px; cursor:pointer; margin:0 10px; transition:0.2s; }
    button:hover { color:#ff3366; transform:scale(1.1); }
    #progress-container { flex:1; height:8px; background:rgba(255,255,255,0.25); border-radius:4px; cursor:pointer; }
    #progress-filled { height:100%; background:#ff3366; width:0%; border-radius:4px; transition:width 0.2s; }
    #time { font-size:15px; min-width:110px; text-align:center; font-weight:bold; }
    #speed { background:rgba(255,255,255,0.15); color:#fff; border:none; padding:8px 14px; border-radius:6px; margin-left:15px; font-size:14px; }
    #fullscreen-btn { margin-left:auto; font-size:24px; }
  </style>
</head>
<body>
  <div id="player-container">
    <video id="video" controlsList="nodownload" playsinline></video>

    <div class="controls">
      <button id="play">▶️</button>
      <div id="progress-container">
        <div id="progress-filled"></div>
      </div>
      <span id="time">Connecting...</span>
      <select id="speed">
        <option value="0.5">0.5×</option>
        <option value="0.75">0.75×</option>
        <option value="1" selected>1×</option>
        <option value="1.25">1.25×</option>
        <option value="1.5">1.5×</option>
        <option value="2">2×</option>
      </select>
      <button id="fullscreen-btn">Fullscreen ⛶</button>
    </div>
  </div>

  <script>
    const video = document.getElementById('video');
    const playBtn = document.getElementById('play');
    const progressContainer = document.getElementById('progress-container');
    const progressFilled = document.getElementById('progress-filled');
    const timeDisplay = document.getElementById('time');
    const speedSelect = document.getElementById('speed');
    const fullscreenBtn = document.getElementById('fullscreen-btn');

    // ←←← Yeh tune Eruda se nikaala URL paste kar diya
    const hlsUrl = 'https://d2ub68wbsad3he.cloudfront.net/index_6.m3u8?Signature=iN-Bdi1v-ynIy5n5Fqwp2lwUGY6Q8iO4j6A-awCaAG1M%7EAMaoL4EXxfUG06iQrqrjildhN%7Eh5fLn1wqBChlYurI444a2XD9mcgZwbYmNyqnLTiHhlGGkH2xAJLnGPLUvtHNp8Mg191sU1oMDvthtNm4qVy8xn2TyyzFFyjjFWqXLo6B-GrqAwPPU7Z2XhUE2JzBCSgO6OrwRgksFNs1Fu4FXn7k1lZQMcwZAQ6s%7EW5gx4VSN2Xp9mVDhKEfJBQ7z1ECgkPNPiWlrPaWd5jNir7aUCG6VJKgvkIXaPYwTHyOv4mfG6whB71eLWS5V%7EoRMN8N7peBdrxULMlmksSlYyQ__&Key-Pair-Id=APKAXVKMENFCRKTG5XE2&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9kMnViNjh3YnNhZDNoZS5jbG91ZGZyb250Lm5ldC8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzcxMzQ5NzIxfX19XX0_&start=1771335000';

    let hls;

    function initHLS() {
      if (Hls.isSupported()) {
        hls = new Hls({
          enableWorker: true,
          lowLatencyMode: true,
          backBufferLength: 90,
          maxBufferLength: 60
        });
        hls.loadSource(hlsUrl);
        hls.attachMedia(video);

        hls.on(Hls.Events.MANIFEST_PARSED, () => {
          video.play().catch(e => console.log("Play failed:", e));
          timeDisplay.textContent = 'LIVE';
        });

        hls.on(Hls.Events.ERROR, (event, data) => {
          console.error("HLS Error:", data);
          if (data.fatal) {
            timeDisplay.textContent = 'Error: Stream ended or invalid';
          }
        });
      } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
        video.src = hlsUrl;
        video.addEventListener('loadedmetadata', () => {
          video.play();
          timeDisplay.textContent = 'LIVE';
        });
      } else {
        timeDisplay.textContent = 'Browser not supported';
      }
    }

    initHLS();

    // Play/Pause
    playBtn.addEventListener('click', () => {
      if (video.paused) {
        video.play();
        playBtn.textContent = '⏸️';
      } else {
        video.pause();
        playBtn.textContent = '▶️';
      }
    });

    // Progress (for seekable live streams)
    video.addEventListener('timeupdate', () => {
      if (video.seekable && video.seekable.length > 0) {
        const duration = video.seekable.end(video.seekable.length - 1) - video.seekable.start(0);
        if (duration > 0) {
          const percent = ((video.currentTime - video.seekable.start(0)) / duration) * 100;
          progressFilled.style.width = percent + '%';
          timeDisplay.textContent = formatTime(video.currentTime - video.seekable.start(0)) + ' / LIVE';
        }
      }
    });

    // Seek
    progressContainer.addEventListener('click', (e) => {
      if (video.seekable && video.seekable.length > 0) {
        const rect = progressContainer.getBoundingClientRect();
        const pos = (e.clientX - rect.left) / rect.width;
        const seekTime = video.seekable.start(0) + pos * (video.seekable.end(video.seekable.length - 1) - video.seekable.start(0));
        video.currentTime = seekTime;
      }
    });

    // Speed
    speedSelect.addEventListener('change', () => {
      video.playbackRate = parseFloat(speedSelect.value);
    });

    // Fullscreen
    fullscreenBtn.addEventListener('click', () => {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch(err => console.log(err));
      } else {
        document.exitFullscreen();
      }
    });

    function formatTime(seconds) {
      const min = Math.floor(seconds / 60);
      const sec = Math.floor(seconds % 60);
      return `\( {min.toString().padStart(2,'0')}: \){sec.toString().padStart(2,'0')}`;
    }

    // Double-tap for fullscreen
    video.addEventListener('dblclick', () => fullscreenBtn.click());
  </script>
</body>
</html>
